# git의 원리 (add, objects, commit)  
 
 출처: [지옥에서온 Git](https://www.inflearn.com/course/%EC%A7%80%EC%98%A5%EC%97%90%EC%84%9C-%EC%98%A8-git/dashboard)

 add, commit과 같은 명령시 .git 폴더의 변화에 대한 이해
 
 
 ### add의 원리
  1. add시 git은 파일의 내용을 보고 파일의 내용과 부가적인 정보를 추가하여 압축
  2. 압축한 결과를 sha-1 해시알고리즘을 통해 40자 해시코드생성
  3. .git/objects/(해시코드 앞두글자)로 디렉토리를 생성하고 나머지 38자를 파일이름으로 하여 파일내용을 저장
  
      > **이때  파일이름이 달라도 내용이 같으면 동일한 해시코드를 가진다 => 같은파일로 취급하여 중복을 효율적으로 제거**


 ### commit의 원리
  commit역시 .git/objects안에 디렉토리안에 파일의 형식으로 관리됨
  
  * commit에는 누가 커밋했는지, 커밋메세지내용, **tree(commit을 통해 관리된 파일들의 이름과 내용에 대한 정보를 담고있음)**, **parent(이전 커밋에 대한 내용)** 가 있음
  * 각각의 버전마다 tree는 다름 => 쉽게 말해 버전이 만들어진 시점의 스냅샷
 
 ### object와 index
 
  #### index
   
   * 커밋할때 tree에 있는 내용을 로컬저장소에 바로 저장하는 것이 아니라 그 사이공간인 인덱스에 파일상태를 기록(stage 라고도한다)
   * 이러한 중간과정 덕분에 커밋이 필요없는 파일들을 포함하지않거나 원하는 사항만 인덱스에 등록가능

  #### object
   git의 object안에는 크게 세가지가 저장된다
   
   * blob: 파일의 내용
   * tree: blob에 대한 정보를 담고있다. blob들의 해시값과 파일이름
   * commit: commit에 대한 정보
    
   
